{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{Link}from'react-router-dom';import{fetchToken}from\"../components/Auth/auth\";import'../assets/styles/subtasksList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";console.log('Subtaskslist page is requested..');const SubTasksList=()=>{const{taskId}=useParams();const[subtasks,setSubtasks]=useState([]);const[taskTitle,setTaskTitle]=useState('');console.log('subtask page is calling');useEffect(()=>{console.log('useeffect function executing');if(!taskId){console.error('No taskId found');return;}const fetchSubTasks=async()=>{try{const token=await fetchToken();console.log('token is',token);const response=await fetch(\"http://localhost:3002/api/subtasks/\".concat(taskId),{headers:{'x-auth-token':token}});if(!response.ok){throw new Error('Failed to fetch subtasks');}const data=await response.json();console.log(\"API response data\",data);if(data&&Array.isArray(data.subtasks)){setSubtasks(data.subtasks);console.log(\"subtasks list\",data.subtasks);}else{setSubtasks([]);console.log('No subtasks found');}setTaskTitle(data.title||\"Untitled Task\");}catch(err){console.error('Error while fetching Subtasks',err);setSubtasks([]);}};fetchSubTasks();},[taskId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"subtasks-list-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"home-link-button\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/subtask\",className:\"home-link-button\",children:\"Create Sub Task\"})}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Subtasks for \",taskTitle]}),/*#__PURE__*/_jsx(\"div\",{className:\"subtasks-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Subtask Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Due Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subtasks.length>0?subtasks.map(subtask=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:subtask.title}),/*#__PURE__*/_jsx(\"td\",{children:subtask.status}),/*#__PURE__*/_jsx(\"td\",{children:new Date(subtask.dueDate).toLocaleDateString()})]},subtask._id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:\"No subtasks available\"})})})]})})]});};export default SubTasksList;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","fetchToken","jsx","_jsx","jsxs","_jsxs","console","log","SubTasksList","taskId","subtasks","setSubtasks","taskTitle","setTaskTitle","error","fetchSubTasks","token","response","fetch","concat","headers","ok","Error","data","json","Array","isArray","title","err","className","children","to","length","map","subtask","status","Date","dueDate","toLocaleDateString","_id","colSpan"],"sources":["D:/taskapp/task-frontend/src/pages/SubtasksList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchToken } from \"../components/Auth/auth\";\r\nimport '../assets/styles/subtasksList.css';\r\n\r\nconsole.log('Subtaskslist page is requested..');\r\nconst SubTasksList = () => {\r\n    const { taskId } = useParams();\r\n    const [subtasks, setSubtasks] = useState([]);\r\n    const [taskTitle, setTaskTitle] = useState('');\r\n    console.log('subtask page is calling');\r\n\r\n    useEffect(() => {\r\n        console.log('useeffect function executing');\r\n        \r\n        if (!taskId) {\r\n            console.error('No taskId found');\r\n            return;\r\n        }\r\n\r\n        const fetchSubTasks = async () => {\r\n            try {\r\n                const token = await fetchToken();\r\n                console.log('token is', token);\r\n                \r\n                const response = await fetch(`http://localhost:3002/api/subtasks/${taskId}`, {\r\n                    headers: {\r\n                        'x-auth-token': token,\r\n                    }\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error('Failed to fetch subtasks');\r\n                }\r\n\r\n                const data = await response.json();\r\n                console.log(\"API response data\", data);\r\n\r\n                if (data && Array.isArray(data.subtasks)) {\r\n                    setSubtasks(data.subtasks);\r\n                    console.log(\"subtasks list\", data.subtasks);\r\n                } else {\r\n                    setSubtasks([]);\r\n                    console.log('No subtasks found');\r\n                }\r\n\r\n                setTaskTitle(data.title || \"Untitled Task\");\r\n            }\r\n            catch (err) {\r\n                console.error('Error while fetching Subtasks', err);\r\n                setSubtasks([]);\r\n            }\r\n        };\r\n        fetchSubTasks();\r\n    }, [taskId]);\r\n\r\n    return (\r\n        <div className=\"subtasks-list-container\">\r\n        <p><Link to=\"/dashboard\" className=\"home-link-button\">Dashboard</Link></p>\r\n        <p><Link to=\"/subtask\" className=\"home-link-button\">Create Sub Task</Link></p>\r\n            <h1>Subtasks for {taskTitle}</h1>\r\n            <div className=\"subtasks-table\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Subtask Name</th>\r\n                            <th>Status</th>\r\n                            <th>Due Date</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {subtasks.length > 0 ? (\r\n                            subtasks.map((subtask) => (\r\n                                <tr key={subtask._id}>\r\n                                    <td>{subtask.title}</td>\r\n                                    <td>{subtask.status}</td>\r\n                                    <td>{new Date(subtask.dueDate).toLocaleDateString()}</td>\r\n                                </tr>\r\n                            ))\r\n                        ) : (\r\n                            <tr>\r\n                                <td colSpan=\"3\">No subtasks available</td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SubTasksList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}