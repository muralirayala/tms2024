{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import'./TasksList.css';import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TasksList=()=>{const navigate=useNavigate();const[tasks,setTasks]=useState([]);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const limit=5;const fetchTasks=async page=>{try{const response=await axios.get(\"http://localhost:3000/api/tasks?page=\".concat(page,\"&limit=\").concat(limit));console.log('API Response:',response.data);setTasks(response.data.tasks||[]);setTotalPages(response.data.totalPages||1);}catch(err){console.error('Error fetching tasks:',err);}};useEffect(()=>{fetchTasks(page);},[page]);const handlePageChange=newPage=>{setPage(newPage);};console.log('Tasks:',tasks);console.log('Tasks Length:',tasks.length);console.log('Total Pages:',totalPages);const handleEdit=async task=>{navigate(\"/tasks/edit/\".concat(task._id),{state:{task}});};const handleDelete=async id=>{try{await axios.delete(\"http://localhost:3000/api/tasks/\".concat(id));console.log('Task deleted successfully');setTasks(tasks.filter(task=>task._id!==id));}catch(err){console.error('Error in deleting the task',err);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tasks List\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/tasks\",children:\"Create New Task\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"tasks-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Task Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tasks.length>0?tasks.map(task=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:task.title}),/*#__PURE__*/_jsx(\"td\",{children:task.status}),/*#__PURE__*/_jsx(\"td\",{children:task.priority}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(task),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(task._id),children:\"Delete\"})]})]},task._id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"No tasks available.\"})})})]}),/*#__PURE__*/_jsx(\"div\",{children:Array.from({length:totalPages},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(index+1),disabled:page===index+1,children:index+1},index))})]});};export default TasksList;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","TasksList","navigate","tasks","setTasks","page","setPage","totalPages","setTotalPages","limit","fetchTasks","response","get","concat","console","log","data","err","error","handlePageChange","newPage","length","handleEdit","task","_id","state","handleDelete","id","delete","filter","children","to","className","map","title","status","priority","onClick","colSpan","Array","from","_","index","disabled"],"sources":["D:/Nodejs/tms2024/task-frontend/src/components/TaskList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport './TasksList.css';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst TasksList = () => {\r\n    const navigate = useNavigate();\r\n    const [tasks, setTasks] = useState([]);\r\n    const [page, setPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n    const limit = 5;\r\n\r\n    const fetchTasks = async (page) => {\r\n        try {\r\n            const response = await axios.get(`http://localhost:3000/api/tasks?page=${page}&limit=${limit}`);\r\n            console.log('API Response:', response.data);\r\n            setTasks(response.data.tasks || []);\r\n            setTotalPages(response.data.totalPages || 1);\r\n        } catch (err) {\r\n            console.error('Error fetching tasks:', err);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchTasks(page);\r\n    }, [page]);\r\n\r\n    const handlePageChange = (newPage) => {\r\n        setPage(newPage);\r\n    };\r\n\r\n    console.log('Tasks:', tasks);\r\n    console.log('Tasks Length:', tasks.length);\r\n    console.log('Total Pages:', totalPages);\r\n\r\n    const handleEdit = async (task) => {\r\n        navigate(`/tasks/edit/${task._id}`, { state: { task } });\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            await axios.delete(`http://localhost:3000/api/tasks/${id}`);\r\n            console.log('Task deleted successfully');\r\n            setTasks(tasks.filter(task => task._id !== id));\r\n        } catch (err) {\r\n            console.error('Error in deleting the task', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Tasks List</h1>\r\n            <p><Link to='/tasks'>Create New Task</Link></p>\r\n            <p><Link to=\"/\">Home</Link></p>\r\n            <table className=\"tasks-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Task Title</th>\r\n                        <th>Status</th>\r\n                        <th>Priority</th>\r\n                        <th>Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {tasks.length > 0 ? (\r\n                        tasks.map(task => (\r\n                            <tr key={task._id}>\r\n                                <td>{task.title}</td>\r\n                                <td>{task.status}</td>\r\n                                <td>{task.priority}</td>\r\n                                <td>\r\n                                    <button onClick={() => handleEdit(task)}>Edit</button>\r\n                                    <button onClick={() => handleDelete(task._id)}>Delete</button>\r\n                                </td>\r\n                            </tr>\r\n                        ))\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"4\">No tasks available.</td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n            <div>\r\n                {Array.from({ length: totalPages }, (_, index) => (\r\n                    <button\r\n                        key={index}\r\n                        onClick={() => handlePageChange(index + 1)}\r\n                        disabled={page === index + 1}\r\n                    >\r\n                        {index + 1}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TasksList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}